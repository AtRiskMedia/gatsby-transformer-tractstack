{"version":3,"sources":["src/gatsby-node.js"],"names":["require","tagExtractor","processMarkdown","DrupalNodes","_camelCase","exports","onCreateNode","node","createNodeId","createContentDigest","actions","internal","owner","includes","type","createNode","createNodeField","createParentChildLink","content","field_markdown_body","paneFragment","id","parent","children","mediaType","rawMarkdownBody","contentDigest","child"],"mappings":";;;;AAAA;;;;;;;;;;AACA,eAA0CA,OAAO,aAAjD;AAAA,IAAQC,YAAR,YAAQA,YAAR;AAAA,IAAsBC,eAAtB,YAAsBA,eAAtB;;AACA,IAAMC,WAAW,GAAG,CAAC,qBAAD,EAAuB,uBAAvB,EAA+C,kBAA/C,EAAkE,eAAlE,EAAkF,gBAAlF,CAApB;;AACA,IAAMC,UAAU,GAAGJ,OAAO,CAAC,kBAAD,CAA1B;;AAEAK,OAAO,CAACC,YAAR;AAAA,sEAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AACrBC,YAAAA,IADqB,QACrBA,IADqB,EAErBC,YAFqB,QAErBA,YAFqB,EAGrBC,mBAHqB,QAGrBA,mBAHqB,EAIrBC,OAJqB,QAIrBA,OAJqB;;AAAA,kBAMjBH,IAAI,CAACI,QAAL,CAAcC,KAAd,KAAwB,sBAAxB,IAAkD,CAACT,WAAW,CAACU,QAAZ,CAAqBN,IAAI,CAACI,QAAL,CAAcG,IAAnC,CANlC;AAAA;AAAA;AAAA;;AAAA,6CAOZ,EAPY;;AAAA;AASbC,YAAAA,UATa,GAS0CL,OAT1C,CASbK,UATa,EASDC,eATC,GAS0CN,OAT1C,CASDM,eATC,EASgBC,qBAThB,GAS0CP,OAT1C,CASgBO,qBAThB;AAUjBC,YAAAA,OAViB,GAUPX,IAAI,CAACY,mBAVE,EAWrB;AACA;AACA;;AACMC,YAAAA,YAde,GAcA;AACnBC,cAAAA,EAAE,EAAEb,YAAY,WAAID,IAAI,CAACc,EAAT,iBADG;AAEnBC,cAAAA,MAAM,EAAEf,IAAI,CAACc,EAFM;AAGnBE,cAAAA,QAAQ,EAAE,EAHS;AAInBZ,cAAAA,QAAQ,EAAE;AACRG,gBAAAA,IAAI,EAAEV,UAAU,WAAIG,IAAI,CAACI,QAAL,CAAcG,IAAlB,EADR;AAERU,gBAAAA,SAAS,iBAFD;AAGRN,gBAAAA,OAAO,EAAEA;AAHD;AAJS,aAdA;AAwBrBE,YAAAA,YAAY,CAACK,eAAb,GAA+BP,OAA/B;AACAE,YAAAA,YAAY,CAACT,QAAb,CAAsBe,aAAtB,GAAsCjB,mBAAmB,CAACW,YAAD,CAAzD;AACAL,YAAAA,UAAU,CAACK,YAAD,CAAV;AACAH,YAAAA,qBAAqB,CAAC;AAAEK,cAAAA,MAAM,EAAEf,IAAV;AAAgBoB,cAAAA,KAAK,EAAEP;AAAvB,aAAD,CAArB;AA3BqB,6CA4BdA,YA5Bc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import * as React from \"react\"\nconst { tagExtractor, processMarkdown } = require(`./helpers`)\nconst DrupalNodes = ['paragraph__markdown','paragraph__background','paragraph__video','paragraph__d3','paragraph__h5p'];\nconst _camelCase = require('lodash/camelCase');\n\nexports.onCreateNode = async ({\n  node,\n  createNodeId,\n  createContentDigest,\n  actions\n}) => {\n  if( node.internal.owner !== \"gatsby-source-drupal\" || !DrupalNodes.includes(node.internal.type) ) {\n    return {}\n  }\n  const { createNode, createNodeField, createParentChildLink } = actions\n  let content = node.field_markdown_body;\n  // todo:\n  // preprocess raw markdown and inject tractstack goodies\n  //\n  const paneFragment = {\n    id: createNodeId(`${node.id}Unprocessed`),\n    parent: node.id,\n    children: [],\n    internal: {\n      type: _camelCase(`${node.internal.type}`),\n      mediaType: `text/markdown`,\n      content: content\n    },\n  }\n  paneFragment.rawMarkdownBody = content\n  paneFragment.internal.contentDigest = createContentDigest(paneFragment)\n  createNode(paneFragment)\n  createParentChildLink({ parent: node, child: paneFragment })\n  return paneFragment\n}\n"],"file":"gatsby-node.js"}