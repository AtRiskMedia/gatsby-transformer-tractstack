{"version":3,"sources":["src/gatsby-node.js"],"names":["require","tagExtractor","processMarkdown","DrupalNodes","_camelCase","exports","onCreateNode","node","createNodeId","createContentDigest","actions","internal","owner","includes","type","createNode","createNodeField","createParentChildLink","content","field_markdown_body","markdownNode","id","parent","children","mediaType","frontmatter","title","field_alt_description","console","log","rawMarkdownBody","contentDigest","child"],"mappings":";;;;AAAA;;;;;;AACA,eAA0CA,OAAO,aAAjD;AAAA,IAAQC,YAAR,YAAQA,YAAR;AAAA,IAAsBC,eAAtB,YAAsBA,eAAtB;;AACA,IAAMC,WAAW,GAAG,CAAC,qBAAD,EAAuB,uBAAvB,EAA+C,kBAA/C,EAAkE,eAAlE,EAAkF,gBAAlF,CAApB;;AACA,IAAMC,UAAU,GAAGJ,OAAO,CAAC,kBAAD,CAA1B;;AAEAK,OAAO,CAACC,YAAR,GAAuB,gBAKjB;AAAA,MAJJC,IAII,QAJJA,IAII;AAAA,MAHJC,YAGI,QAHJA,YAGI;AAAA,MAFJC,mBAEI,QAFJA,mBAEI;AAAA,MADJC,OACI,QADJA,OACI;;AACJ,MAAIH,IAAI,CAACI,QAAL,CAAcC,KAAd,KAAwB,sBAAxB,IAAkD,CAACT,WAAW,CAACU,QAAZ,CAAqBN,IAAI,CAACI,QAAL,CAAcG,IAAnC,CAAvD,EAAkG;AAChG,WAAO,EAAP;AACD;;AACD,MAAQC,UAAR,GAA+DL,OAA/D,CAAQK,UAAR;AAAA,MAAoBC,eAApB,GAA+DN,OAA/D,CAAoBM,eAApB;AAAA,MAAqCC,qBAArC,GAA+DP,OAA/D,CAAqCO,qBAArC;AACA,MAAIC,OAAO,GAAGX,IAAI,CAACY,mBAAnB,CALI,CAMJ;AAEA;AACA;AACA;;AACA,MAAMC,YAAY,GAAG;AACnBC,IAAAA,EAAE,EAAEb,YAAY,WAAID,IAAI,CAACc,EAAT,qBADG;AAEnBC,IAAAA,MAAM,EAAEf,IAAI,CAACc,EAFM;AAGnBE,IAAAA,QAAQ,EAAE,EAHS;AAInBZ,IAAAA,QAAQ,EAAE;AACRG,MAAAA,IAAI,gBADI;AAERU,MAAAA,SAAS,iBAFD;AAGRN,MAAAA,OAAO,EAAEA;AAHD;AAJS,GAArB;AAUAE,EAAAA,YAAY,CAACK,WAAb,GAA2B;AACzBC,IAAAA,KAAK,EAAEnB,IAAI,CAACoB;AADa,GAA3B;AAGAC,EAAAA,OAAO,CAACC,GAAR,CAAYtB,IAAZ,EAAkBa,YAAlB;AACAA,EAAAA,YAAY,CAACU,eAAb,GAA+BZ,OAA/B;AACAE,EAAAA,YAAY,CAACT,QAAb,CAAsBoB,aAAtB,GAAsCtB,mBAAmB,CAACW,YAAD,CAAzD;AACAL,EAAAA,UAAU,CAACK,YAAD,CAAV;AACAH,EAAAA,qBAAqB,CAAC;AAAEK,IAAAA,MAAM,EAAEf,IAAV;AAAgByB,IAAAA,KAAK,EAAEZ;AAAvB,GAAD,CAArB;AACA,SAAOA,YAAP;AACD,CAnCD","sourcesContent":["import * as React from \"react\"\nconst { tagExtractor, processMarkdown } = require(`./helpers`)\nconst DrupalNodes = ['paragraph__markdown','paragraph__background','paragraph__video','paragraph__d3','paragraph__h5p'];\nconst _camelCase = require('lodash/camelCase');\n\nexports.onCreateNode = ({\n  node,\n  createNodeId,\n  createContentDigest,\n  actions\n}) => {\n  if( node.internal.owner !== \"gatsby-source-drupal\" || !DrupalNodes.includes(node.internal.type) ) {\n    return {}\n  }\n  const { createNode, createNodeField, createParentChildLink } = actions\n  let content = node.field_markdown_body;\n  // process images\n\n  // todo:\n  // preprocess raw markdown and inject tractstack goodies\n  //\n  const markdownNode = {\n    id: createNodeId(`${node.id} MarkdownRemark`),\n    parent: node.id,\n    children: [],\n    internal: {\n      type: `PaneFragment`,\n      mediaType: `text/markdown`,\n      content: content\n    },\n  }\n  markdownNode.frontmatter = {\n    title: node.field_alt_description,\n  }\n  console.log(node, markdownNode)\n  markdownNode.rawMarkdownBody = content\n  markdownNode.internal.contentDigest = createContentDigest(markdownNode)\n  createNode(markdownNode)\n  createParentChildLink({ parent: node, child: markdownNode })\n  return markdownNode\n}\n"],"file":"gatsby-node.js"}